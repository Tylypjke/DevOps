## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Решение

- Электронные чеки в json виде

```
Подойдут документо-ориентированые СУБД, например MongoDB

Электронный чек в .json формате является документом
```

- Склады и автомобильные дороги для логистической компании

```
Подойдут графовые СУБД, например Neo4j

СУБД позволяет оптимизировать пути до объектов БД
```

- Генеалогические деревья

```
Подойдут сетевые СУБД, например IDMS

сетевые СУБД предоставляют возможность иметь несколько предков 
```


- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

```
Подойдут ключ-значение СУБД, например Redis

СУБД ускоряет работу с кешом
```

- Отношения клиент-покупка для интернет-магазина

```
Подойдут реляционные СУБД, например MySQL или PostgreSQL

У интернет-магазина много связей, требуется постоянная аналитика транкзаций, таблиц и т.д. 
```

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме.  
Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - 
это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Решение

https://habr.com/ru/company/gaz-is/blog/551986/

согласно CAP-теореме:

C - Согласованность, Целостность, Консистентность  
A - Доступность  
P - Устойчивость к разделению

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

```
PC обеспечивается согласованность и устойчивость к разделению в ущерб доступности
```

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

```
PA обеспечивается доступность и устойчивость к разделению в ущерб целостности   
(в раздельных кластрерах будут не согласованные данные)
```

- Система может не прислать корректный ответ или сбросить соединение

```
PA обеспечивается доступность и устойчивость к разделению в ущерб консистентности
```

согласно PACELC-теореме:

E - Else иначе  
L - Latency общее время задержки от момента выполнения действия пользователем до момента предоставления ему результата.   


- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

```
PC/EC
```

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

```
PA/EL
```

- Система может не прислать корректный ответ или сбросить соединение

```
PA/EL
```

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Решение

Не могут

принцип BASE про производительность системы

принцип ACID про сохранность данных

ACID требует постоянную согласованность

BASE позволяет выполнить согласование в будущем 

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub.   
Что это за система? Какие минусы выбора данной системы?

## Решение

Подойдёт СУБД ключ-значение Redis. 

```
+ благодаря Redis достигается кеширование и высокая производительность.

+ для кластеризации Redis используется Redis Sentinel

- работает только на одном ядре процессора в однопоточном режиме

- высокие требования к оперативной памяти

- отдельно настраивается запись на диски, при выключение, останется только запись на HDD. 
При включенной записи на диски, уменьшается производительность. 

- отсутствует разграничение прав доступа по пользователям.

- отсутствует поддержка языка SQL

```
